### 什么是zookeeper？
> Apache ZooKeeper 是一个高可靠的分布式协调中间件, 解决分布式一致性问题（在分布式系统中，多个结点就某一个提议如何达成一致）
### zookeeper节点有哪些特性，什么时候使用什么特性的节点？
* 持久结点（PERSISTENT）  
  最常见的Znode类型,一旦创建将在一直存在于服务端,除非客户端通过删除操作进行删除。持久结点下可以创建子结点。
* 持久有序节点(PERSISTENT_SEQUENTIAL)  
  在具有持久结点基本特性的基础上,会通过在结点路径后缀一串序号来区分多个子结点创建的先后顺序。这工作由Zookeeper服务端自动给我们做,只要在创建Znode时指定结点类型为该类型。
* 临时结点(EPHEMERAL)  
  临时结点的生命周期和客户端会话保持一致。客户端段会话存在的话临时结点也存在,客户端会话断开则临时结点会自动被服务端删除。临时结点下不能创建子结点。
* 临时有序结点（EPHEMERAL_SEQUENTIAL）  
  具有临时结点的基本特性,又有顺序性。
  
### 使用zookeeper实现服务注册中心，原理是什么？用到了zk的哪些特性
原理:在zookeeper中，进行服务注册，实际上就是在zookeeper中创建了一个znode节点，该节点存储了该服务的IP、端口、调用方式(协议、序列化方式)等。该节点承担着最重要的职责，它由服务提供者(发布服务时)创建，以供服务消费者获取节点中的信息，从而定位到服务提供者真正网络拓扑位置以及得知如何调用。RPC服务注册、发现过程简述如下：

* 服务提供者启动时，会将其服务名称，ip地址注册到配置中心。
* 服务消费者在第一次调用服务时，会通过注册中心找到相应的服务的IP地址列表，并缓存到本地，以供后续使用。当消费者调用服务时，不会再去请求注册中心，而是直接通过负载均衡算法从IP列表中取一个服务提供者的服务器调用服务。
* 当服务提供者的某台服务器宕机或下线时，相应的ip会从服务提供者IP列表中移除。同时，注册中心会将新的服务IP地址列表发送给服务消费者机器，缓存在消费者本机。
* 当某个服务的所有服务器都下线了，那么这个服务也就下线了。
* 同样，当服务提供者的某台服务器上线时，注册中心会将新的服务IP地址列表发送给服务消费者机器，缓存在消费者本机。
* 服务提供方可以根据服务消费者的数量来作为服务下线的依据。

> 特性: 心跳检测/节点监听/分布式一致性